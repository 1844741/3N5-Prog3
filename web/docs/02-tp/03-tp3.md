---
title: TP3
description: Travail Pratique 3 - Appli Android
hide_table_of_contents: true
---

# Travail 3 : Appli Android

- Relier avec une libraire de BD
- Couche de service et tests unitaires
- Ajouter un tiroir de navigation avec options de suppressions des sujets et des votes

<Row>

<Column>

## Git et suivi du code

Le nom du repo est AXX-4203N5-VotoDroid-Dupont. Il s'agit du même repo que pour le TP2.

&#8203;<Highlight color="tip">3 points</Highlight>
Un minimum de 5 commits de tailles comparables (il n'y a pas un commit avec tout dedans et les autres vides)
décrivant l'avancement du projet dans un français correct (passe Word).
Ces points sont conditionnés à la remise d'au moins un commit par semaine de cours.

</Column>

<Column>

## Librairie d'accès à la base de données

### Code fourni

Une librairie complète fournissant une base de données SQLite avec Room et ses méthodes est fournie:
1. télécharge le fichier suivant [tp3-bd.aar](@site/static/tp3-bd-release.aar) 
2. place ce fichier dans le dossier libs de ton projet (app/libs).
2. Ajoute la dépendance dans le fichier build.gradle de ton module app.
```gradle
dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
}
```
3. Dans le onCreate de ton application, initialise la base de données.
```kotlin   
class App : Application() {
    override fun onCreate() {
        super.onCreate()
        VotoDatabase.init(this)
    }
}
```

</Column>

</Row>

<Row>

<Column>

## Création d'un sujet

Le code ainsi que les tests pour la création d'un sujet sont fournis. Vous devez intégrer la création d'un sujet dans l'interface graphique.

TODO Dans recette, montrer comment faire la création d'un sujet dans le service et les tests

- <Highlight color="tip">1 point</Highlight> Un sujet est créé dans l'écran de création en utilisant le contenu du champ texte.
- <Highlight color="tip">1 point</Highlight> Un message indiquant la raison de l'erreur est affiché si la création échoue ("sujet vide", "sujet trop court", "sujet existant").

</Column>

<Column>

## Affichage de la liste des sujets

- <Highlight color="caution">1 point</Highlight> Au niveau service, vous devez vous assurez de renvoyer la liste triée par nombre de votes descendant.
- <Highlight color="caution">1 point</Highlight> Vous devez écrire les tests pour votre méthode de service.
- <Highlight color="tip">2 points</Highlight> Vous devez intégrer la liste dans l'écran d'accueil de l'application.

</Column>

</Row>

<Row>

<Column></Column>

<Column>

## Ajout d'un vote

- <Highlight color="caution">2 points</Highlight> Au niveau service, vous devez vous assurez qu'il n'y a pas de vote existant pour ce sujet et cette personne. Assurez-vous de lancer une exception significative si c'est le cas. Vous devez également vous assurer que le nom du votant fait au minimum 4 caractères imprimables (pas des espaces).
- <Highlight color="caution">1 point</Highlight> Vous devez écrire les tests pour votre méthode de service.
- <Highlight color="tip">1 point</Highlight> Vous devez intégrer l'ajout d'un vote dans l'écran correspondant de l'interface graphique. Si le vote est créé avec succès, l'application doit revenir à l'écran d'accueil.
- <Highlight color="tip">1 point</Highlight> Vous devez fournir un message significatif en cas d'erreur (déjà voté ou nom trop court ou vide).

</Column>

</Row>

<Row>

<Column>

## Écran de résultats

- <Highlight color="info">1 point</Highlight> Niveau service, vous devez programmer les différentes méthodes pour la moyenne et la distribution.
- <Highlight color="caution">2 points</Highlight> Vous devez écrire les tests pour vos méthodes de service.
- <Highlight color="tip">3 points</Highlight> Vous devez intégrer les appels dans l'écran de résultats.

</Column>

<Column>

## Tiroir de navigation

Vous devez implémenter un tiroir de navigation qui contient les options suivantes :

- <Highlight color="tip">1 point</Highlight> Navigation vers la page d'accueil "Accueil"
- <Highlight color="tip">1 point</Highlight> Navigation vers la page d'ajout d'un sujet "Ajouter un sujet"
- <Highlight color="tip">1 point</Highlight> Suppression de tous les votes "Suppr. les votes"
- <Highlight color="tip">1 point</Highlight> Suppression de toutes les sujets "Suppr. les sujets"

Autres éléments à considérer :

- <Highlight color="tip">1 point</Highlight> Le tiroir de navigation doit être disponible dans toutes les activités
- <Highlight color="caution">1 point</Highlight> Vous devez écrire les tests pour vos méthodes de service (suppression sujets et votes).
- <Highlight color="tip">1 point</Highlight> L'interface doit se mettre à jour. L'ordre est mis à jour si on supprime les votes, la liste à l'écran est vidée si on supprime les sujets.

</Column>

</Row>

## Fonctionnement global

&#8203;<Highlight color="danger">5 points négatifs</Highlight> Fonctionnement correct et sans plantage. Ce pointage fonctionne en négatif. Si l'application fonctionne correctement en tout temps, vous conservez votre note. Dans le cas contraire, vous perdez des points avec un maximum de 5.

- Plantage de l'application <Highlight color="danger">-1 point</Highlight>
- Interface illisible <Highlight color="danger">-1 point</Highlight>
- Information affichée incohérente <Highlight color="danger">-1 point</Highlight>
- Autres cas...
